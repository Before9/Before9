<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="https://gitee.com/BothSavage/PicGo/raw/master/image/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="https://gitee.com/BothSavage/PicGo/raw/master/image/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta name="description" content="直播：流式传输协议，传输非常短的一小截视频   主播直播 推流 OBS    观看直播 拉流   浏览器：video标签   客户端工具：vlc播放器     协议：rtmp协议">
<meta property="og:type" content="article">
<meta property="og:title" content="视频直播">
<meta property="og:url" content="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/index.html">
<meta property="og:site_name" content="I hope you&#39;re here for me">
<meta property="og:description" content="直播：流式传输协议，传输非常短的一小截视频   主播直播 推流 OBS    观看直播 拉流   浏览器：video标签   客户端工具：vlc播放器     协议：rtmp协议">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/01.png">
<meta property="og:image" content="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/02.png">
<meta property="og:image" content="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/01.jpg">
<meta property="og:image" content="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/02.jpg">
<meta property="og:image" content="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/03.png">
<meta property="og:image" content="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/04.png">
<meta property="article:published_time" content="2018-07-23T12:46:25.000Z">
<meta property="article:modified_time" content="2021-02-05T09:09:55.905Z">
<meta property="article:author" content="小刘同学">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/01.png"><title>视频直播 | I hope you're here for me</title><link ref="canonical" href="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":true},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: {"colWidth":"220px","gapX":"10px"},
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="I hope you're here for me" type="application/atom+xml">
</head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">I hope you're here for me</div><div class="header-banner-info__subtitle">欢迎来到海洋世界</div></div><div class="header-banner-arrow"><div class="header-banner-arrow__icon"><i class="fas fa-angle-down"></i></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">视频直播</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2018-07-23</span></span></div></header><div class="post-body"><blockquote>
<p>  直播：流式传输协议，传输非常短的一小截视频</p>
</blockquote>
<ul>
<li>主播直播 <strong>推流</strong><ul>
<li>OBS </li>
</ul>
</li>
<li>观看直播 <strong>拉流</strong><ul>
<li>  浏览器：video标签</li>
<li>  客户端工具：vlc播放器</li>
</ul>
</li>
<li>  协议：rtmp协议</li>
</ul>
<a id="more"></a>

        <h3 id="介绍">
          <a href="#介绍" class="heading-link"><i class="fas fa-link"></i></a><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3>
      <p>视频直播我们需要两个软件，一个用来直播，一个用来看直播<br><strong>直播</strong><br><img src="/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/01.png" alt="直播"><br><strong>看直播</strong><br><img src="/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/02.png" alt="看直播"></p>

        <h3 id="概念">
          <a href="#概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#概念" class="headerlink" title="概念"></a>概念</h3>
      
        <h4 id="推流">
          <a href="#推流" class="heading-link"><i class="fas fa-link"></i></a><a href="#推流" class="headerlink" title="推流"></a>推流</h4>
      <p>推流：指的是把采集阶段封包好的内容传输到服务器的过程。<br><img src="/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/01.jpg" alt="推流"></p>

        <h4 id="拉流">
          <a href="#拉流" class="heading-link"><i class="fas fa-link"></i></a><a href="#拉流" class="headerlink" title="拉流"></a>拉流</h4>
      <p>拉流：指服务器已有直播内容，用指定地址进行拉取的过程<br><img src="/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/02.jpg" alt="拉流"></p>

        <h3 id="协议">
          <a href="#协议" class="heading-link"><i class="fas fa-link"></i></a><a href="#协议" class="headerlink" title="协议"></a>协议</h3>
      <p>主流的推送协议和优缺点</p>

        <h4 id="RTMP">
          <a href="#RTMP" class="heading-link"><i class="fas fa-link"></i></a><a href="#RTMP" class="headerlink" title="RTMP"></a>RTMP</h4>
      <p>RTMP是Real Time Messaging Protocol（实时消息传输协议）的缩写，是Adobe公司为Flash/AIR平台和服务器之间音、视频及数据传输开发的实时消息传送协议。RTMP协议基于TCP，包括RTMP基本协议及RTMPT/RTMPS/RTMPE等多种变种。<br>RTMP协议中，视频必须是H264编码，音频必须是AAC或MP3编码，且多以flv格式封包。RTMP是目前最主流的流媒体传输协议，对CDN支持良好，实现难度较低，是大多数的直播平台的选择。<br>不过RTMP有着一个最大的不足——不支持浏览器，且Adobe已不再更新。因此直播服务要支持浏览器的话，需要另外的推送协议支持。</p>

        <h4 id="HLS">
          <a href="#HLS" class="heading-link"><i class="fas fa-link"></i></a><a href="#HLS" class="headerlink" title="HLS"></a>HLS</h4>
      <p>Http Live Streaming是由Apple公司定义的基于HTTP的流媒体实时传输协议。它的原理是将整个流分为多个小的文件来下载，每次只下载若干个。服务器端会将最新的直播数据生成新的小文件，客户端只要不停的按顺序播放从服务器获取到的文件，就实现了直播。基本上，HLS是以点播的技术实现了直播的体验。因为每个小文件的时长很短，客户端可以很快地切换码率，以适应不同带宽条件下的播放。<br>分段推送的技术特点，决定了HLS的延迟一般会高于普通的流媒体直播协议。<br>传输内容包括两部分：一是M3U8描述文件，二是TS媒体文件。TS媒体文件中的视频必须是H264编码，音频必须是AAC或MP3编码。<br>由于数据通过HTTP协议传输，所以完全不用考虑防火墙或者代理的问题，而且分段文件的时长很短。</p>

        <h4 id="WebRTC">
          <a href="#WebRTC" class="heading-link"><i class="fas fa-link"></i></a><a href="#WebRTC" class="headerlink" title="WebRTC"></a>WebRTC</h4>
      <p>WebRTC（Web Real-Time Communication），即“源自网页即时通信”。WebRTC是一个支持浏览器进行实时语音、视频对话的开源协议。WebRTC的支持者甚多，Google、Mozilla、Opera推动其成为W3C推荐标准。<br>WebRTC支持目前的主流浏览器，并且基于SRTP和UDP，即便在网络信号一般的情况下也具备较好的稳定性。<br>此外，WebRTC可以实现点对点通信，通信双方延时低，此外，WebRTC可以实现点对点通信，通信双方延时低，是实现“连麦”功能比较好的选择。</p>

        <h3 id="利用云主机搭建直播服务器">
          <a href="#利用云主机搭建直播服务器" class="heading-link"><i class="fas fa-link"></i></a><a href="#利用云主机搭建直播服务器" class="headerlink" title="利用云主机搭建直播服务器"></a>利用云主机搭建直播服务器</h3>
      
        <h4 id="在云主机上环境部署">
          <a href="#在云主机上环境部署" class="heading-link"><i class="fas fa-link"></i></a><a href="#在云主机上环境部署" class="headerlink" title="在云主机上环境部署"></a>在云主机上环境部署</h4>
      <ul>
<li>  创建保存软件目录</li>
</ul>
<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/local/nginx-flv</span><br><span class="line"># 创建了一个安装目录</span><br><span class="line">mkdir /home/flv-tools</span><br><span class="line"># 存储所需软件</span><br></pre></td></tr></tbody></table></div></figure>
<ul>
<li>下载nginx<ul>
<li>什么是nginx，高性能多路复用服务器，让你支持同时响应多个客户连接<ul>
<li>  多线程、多进程开发模式</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://nginx.org/download/nginx-1.18.0.tar.gz</span><br></pre></td></tr></tbody></table></div></figure>
<ul>
<li>  下载直播模块<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/winshining/nginx-http-flv-module</span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  解压下载好的nginx<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.18.0.tar.gz nginx-1.18.0/</span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  解压下载好的直播模块<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip nginx-http-flv-module.zip </span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  进入解压好的nginx下目录，并进行安装前的配置<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd nginx-1.18.0</span><br><span class="line">./configure --prefix=/usr/local/nginx-flv --add-module=/home/flv-tools/nginx-http-flv-module-master</span><br><span class="line"># --prefix: 配置安装路径</span><br><span class="line">#--add-module: 添加安装插件</span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  编译及安装<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">make </span><br><span class="line">make install </span><br><span class="line">------------</span><br><span class="line">make &amp;&amp; make install </span><br></pre></td></tr></tbody></table></div></figure>

        <h4 id="配置文件修改">
          <a href="#配置文件修改" class="heading-link"><i class="fas fa-link"></i></a><a href="#配置文件修改" class="headerlink" title="配置文件修改"></a>配置文件修改</h4>
      <figure class="highlight shell"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">rtmp_auto_push on;</span><br><span class="line">rtmp_auto_push_reconnect 1s;</span><br><span class="line">rtmp_socket_dir /tmp;</span><br><span class="line"></span><br><span class="line">rtmp{</span><br><span class="line">	out_queue 4096;</span><br><span class="line">	out_cork 8;</span><br><span class="line">	max_streams 128;</span><br><span class="line">	timeout 15s;</span><br><span class="line">	drop_idle_publisher 15s;</span><br><span class="line">	log_interval 5s;</span><br><span class="line">	log_size 1m;</span><br><span class="line">	server {</span><br><span class="line">		listen 1935; # 推流端口</span><br><span class="line">		server_name zege;</span><br><span class="line">		</span><br><span class="line">		application live {	# 配置推流地址</span><br><span class="line">			live on; # 打开推流</span><br><span class="line"><span class="meta">			#</span><span class="bash"> gop_cache on;</span></span><br><span class="line"><span class="meta">			#</span><span class="bash"> rtmp://123.123.123.123:1935/live/<span class="built_in">test</span></span></span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">events {</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  配置文件http拉流部分<figure class="highlight shell"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">http {</span><br><span class="line">	include       mime.types;</span><br><span class="line">	default_type  application/octet-stream;</span><br><span class="line">	sendfile        on;</span><br><span class="line">	keepalive_timeout  65;</span><br><span class="line">	server {</span><br><span class="line">		listen       8080; # 拉流通过8080去拉流</span><br><span class="line"><span class="meta">		#</span><span class="bash"> http://123.123.123.123:8080/live/?port=1935&amp;stream=<span class="built_in">test</span></span></span><br><span class="line">		server_name  localhost;</span><br><span class="line">		location /live {</span><br><span class="line">			flv_live on;</span><br><span class="line">			chunked_transfer_encoding  on;</span><br><span class="line">			add_header 'Access-Control-Allow-Origin' '*';</span><br><span class="line">			add_header 'Access-Control-Allow-Credentials' 'true';</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  关闭旧有服务<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx-rtmp/sbin/nginx -s stop</span><br><span class="line">/usr/local/nginx-rtmp/sbin/nginx -s reload</span><br><span class="line"># 重启</span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  开启新服务<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx-flv/sbin/nginx -c /usr/local/nginx-flv/conf/nginx.conf</span><br></pre></td></tr></tbody></table></div></figure>
<blockquote>
<p>   记得打开阿里云的防火墙8080</p>
</blockquote>

        <h3 id="OBS设置推流地址">
          <a href="#OBS设置推流地址" class="heading-link"><i class="fas fa-link"></i></a><a href="#OBS设置推流地址" class="headerlink" title="OBS设置推流地址"></a>OBS设置推流地址</h3>
      </li>
<li>  推流地址<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rtmp://云主机IP及端口/live/自定义密钥</span><br></pre></td></tr></tbody></table></div></figure>
<img src="/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/03.png" alt="推流地址"></li>
<li>  拉流地址<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://云主机IP及端口/live?port=端口&amp;app=live&amp;stream=密钥</span><br></pre></td></tr></tbody></table></div></figure>
<img src="/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/04.png" alt="拉流地址">
        <h3 id="Vue实现拉流">
          <a href="#Vue实现拉流" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue实现拉流" class="headerlink" title="Vue实现拉流"></a>Vue实现拉流</h3>
      </li>
<li>  安装<strong>flv.js</strong>开源工具，进行拉流，哔哩哔哩开源的拉流js<blockquote>
<p>  video.js 对rtmp拉流</p>
</blockquote>
<figure class="highlight plain"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install flv.js --save</span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  导包<figure class="highlight js"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> flv <span class="keyword">from</span> <span class="string">'flv.js'</span>;</span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  构建页面标签，播放标签<figure class="highlight html"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"videoElement"</span> <span class="attr">controls</span> <span class="attr">muted</span>&gt;</span></span><br><span class="line">  	Your browser is too old which doesn't support HTML5 video.</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></tbody></table></div></figure></li>
<li>  进行初始化<figure class="highlight js"><div class="table-container"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">var</span> videoElement = <span class="built_in">document</span>.getElementById(<span class="string">'videoElement'</span>);</span><br><span class="line">    <span class="keyword">var</span> flvPlayer = flv.createPlayer({</span><br><span class="line">      type: <span class="string">'flv'</span>,</span><br><span class="line">      enableWorker: <span class="literal">true</span>,     <span class="comment">//浏览器端开启flv.js的worker,多进程运行flv.js</span></span><br><span class="line">      isLive: <span class="literal">true</span>,           <span class="comment">//直播模式</span></span><br><span class="line">      hasAudio: <span class="literal">false</span>,        <span class="comment">//关闭音频</span></span><br><span class="line">      hasVideo: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// cors: true,</span></span><br><span class="line">      stashInitialSize: <span class="number">128</span>,</span><br><span class="line">      enableStashBuffer: <span class="literal">false</span>, <span class="comment">//播放flv时，设置是否启用播放缓存，只在直播起作用。</span></span><br><span class="line">      url: <span class="string">'http://云主机IP及端口/live?port=端口&amp;app=live&amp;stream=密钥'</span></span><br><span class="line">    })</span><br><span class="line">    flvPlayer.attachMediaElement(videoElement);</span><br><span class="line">    flvPlayer.load();</span><br><span class="line">    flvPlayer.play();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></div></figure>

        <h3 id="OK-这样一个直播就做好了">
          <a href="#OK-这样一个直播就做好了" class="heading-link"><i class="fas fa-link"></i></a><a href="#OK-这样一个直播就做好了" class="headerlink" title="OK,这样一个直播就做好了"></a>OK,这样一个直播就做好了</h3>
      </li>
</ul>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="http://www.hr915.xyz">小刘同学</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/">http://www.hr915.xyz/2018/07/23/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><nav class="post-paginator paginator"><div class="paginator-next"><a class="paginator-next__link" href="/2018/07/22/%E6%97%A0%E9%99%90%E7%BA%A7%E9%80%92%E5%BD%92%E5%88%86%E7%B1%BB/"><span class="paginator-prev__text">无限级递归分类</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">
          介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">
          概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A8%E6%B5%81"><span class="toc-number">2.1.</span> <span class="toc-text">
          推流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%89%E6%B5%81"><span class="toc-number">2.2.</span> <span class="toc-text">
          拉流</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.</span> <span class="toc-text">
          协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RTMP"><span class="toc-number">3.1.</span> <span class="toc-text">
          RTMP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HLS"><span class="toc-number">3.2.</span> <span class="toc-text">
          HLS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WebRTC"><span class="toc-number">3.3.</span> <span class="toc-text">
          WebRTC</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E4%BA%91%E4%B8%BB%E6%9C%BA%E6%90%AD%E5%BB%BA%E7%9B%B4%E6%92%AD%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">
          利用云主机搭建直播服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E4%BA%91%E4%B8%BB%E6%9C%BA%E4%B8%8A%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2"><span class="toc-number">4.1.</span> <span class="toc-text">
          在云主机上环境部署</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BF%AE%E6%94%B9"><span class="toc-number">4.2.</span> <span class="toc-text">
          配置文件修改</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OBS%E8%AE%BE%E7%BD%AE%E6%8E%A8%E6%B5%81%E5%9C%B0%E5%9D%80"><span class="toc-number">5.</span> <span class="toc-text">
          OBS设置推流地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue%E5%AE%9E%E7%8E%B0%E6%8B%89%E6%B5%81"><span class="toc-number">6.</span> <span class="toc-text">
          Vue实现拉流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OK-%E8%BF%99%E6%A0%B7%E4%B8%80%E4%B8%AA%E7%9B%B4%E6%92%AD%E5%B0%B1%E5%81%9A%E5%A5%BD%E4%BA%86"><span class="toc-number">7.</span> <span class="toc-text">
          OK,这样一个直播就做好了</span></a></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/123.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">伸个懒腰吧</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">12</div><div class="sidebar-ov-state-item__name">归档</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>小刘同学</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v5.3.0</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.6.2</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1.0.1/dist/canvas-nest.min.js" color="black" opacity="0.6" count="99" zIndex="-1"></script><script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>